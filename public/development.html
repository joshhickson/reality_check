
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reality Check - Development Tools</title>
    <script src="/socket.io/socket.io.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.155.0/build/three.min.js"></script>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            min-height: 100vh;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            text-align: center;
        }
        .nav {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .nav-title {
            font-size: 18px;
            font-weight: bold;
        }
        .nav-links a {
            color: white;
            text-decoration: none;
            padding: 8px 16px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 5px;
            margin-left: 10px;
            transition: background 0.3s;
        }
        .nav-links a:hover {
            background: rgba(255, 255, 255, 0.3);
        }
        .section {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
        }
        .section h2 {
            cursor: pointer;
            margin: 0 0 20px 0;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        .section-content {
            display: flex;
            gap: 20px;
            margin-top: 20px;
        }
        .section-content > div {
            flex: 1;
        }
        button {
            background: #ff6b6b;
            border: none;
            color: white;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            margin: 5px;
            transition: background 0.3s;
        }
        button:hover {
            background: #ff5252;
        }
        button:disabled {
            background: #666;
            cursor: not-allowed;
        }
        input, select, textarea {
            padding: 10px;
            border: none;
            border-radius: 5px;
            margin: 5px;
            font-size: 16px;
        }
        .card {
            background: rgba(255, 255, 255, 0.9);
            color: #333;
            border-radius: 10px;
            padding: 15px;
            margin: 10px 0;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        .sin-card {
            border-left: 5px solid #ff6b6b;
        }
        .virtue-card {
            border-left: 5px solid #1dd1a1;
        }
        .ring-legend {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 10px 0;
            flex-wrap: wrap;
        }
        .ring-item {
            display: flex;
            align-items: center;
            gap: 5px;
            background: rgba(255, 255, 255, 0.2);
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 14px;
        }
        .ring-color {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }
        .ring-control {
            background: rgba(255, 255, 255, 0.1);
            padding: 10px;
            border-radius: 8px;
            border-left: 4px solid;
            margin: 10px 0;
        }
        .ring-control label {
            display: block;
            margin: 5px 0;
            font-size: 14px;
        }
        .ring-control input[type="range"] {
            width: 100%;
            margin: 5px 0;
        }
        .ring-control input[type="number"] {
            width: 60px;
            padding: 3px;
            font-size: 12px;
        }
        
        /* Console Styles */
        .console-window {
            position: fixed;
            top: 20px;
            right: 20px;
            width: 350px;
            height: 400px;
            background: rgba(0, 0, 0, 0.9);
            border: 1px solid #444;
            border-radius: 8px;
            z-index: 1000;
            display: flex;
            flex-direction: column;
        }
        
        .console-header {
            background: #333;
            padding: 8px 12px;
            border-radius: 8px 8px 0 0;
            font-size: 14px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .console-close {
            cursor: pointer;
            color: #ff6b6b;
            font-weight: bold;
        }
        
        .console-content {
            flex: 1;
            padding: 8px;
            overflow-y: auto;
            font-family: 'Courier New', monospace;
            font-size: 11px;
            color: #00ff00;
            line-height: 1.4;
        }
        
        .console-info { color: #00ff00; }
        .console-warning { color: #feca57; }
        .console-error { color: #ff6b6b; }
        .console-success { color: #1dd1a1; }
        .console-card { color: #ff9800; }
        .console-state { color: #9c88ff; }
        .console-timer { color: #48dbfb; }
        .console-event { color: #f0932b; }
        .console-global { color: #eb4d4b; }
        .console-math { color: #6c5ce7; }
        .console-perf { color: #a29bfe; }
        
        .timestamp {
            color: #666;
            font-size: 10px;
        }

        /* Sprite Builder Styles */
        .sprite-builder {
            display: grid;
            grid-template-columns: 1fr 300px 1fr;
            gap: 20px;
            margin-top: 20px;
        }
        .sprite-preview {
            display: flex;
            flex-direction: column;
            align-items: center;
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 10px;
        }
        .sprite-canvas {
            width: 200px;
            height: 200px;
            background: #2a2a2a;
            border: 2px solid #555;
            border-radius: 5px;
            margin: 10px 0;
        }
        .sprite-controls {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 10px;
        }
        .sprite-layer {
            background: rgba(0, 0, 0, 0.3);
            padding: 10px;
            margin: 5px 0;
            border-radius: 5px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .layer-controls {
            display: flex;
            gap: 5px;
        }
        .layer-controls button {
            padding: 5px 10px;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <div class="container">
        <nav class="nav">
            <div class="nav-title">üé≤ Reality Check - Development Tools</div>
            <div class="nav-links">
                <a href="index.html">Game</a>
                <a href="about.html">About</a>
            </div>
        </nav>
        
        <h1>üõ†Ô∏è Development & Testing Tools</h1>
        <p>Advanced tools for game development, testing, and sprite creation.</p>

        <!-- LPC Sprite Builder -->
        <div class="section">
            <h2 onclick="toggleSection('spriteBuilderContent')">üé® LPC Sprite Builder <span id="spriteBuilderToggle">‚ñº</span></h2>
            <div id="spriteBuilderContent" class="sprite-builder">
                <div class="sprite-controls">
                    <h3>Character Builder</h3>
                    <div>
                        <label>Body Type:</label>
                        <select id="bodyType">
                            <option value="male">Male</option>
                            <option value="female">Female</option>
                            <option value="child">Child</option>
                            <option value="teen">Teen</option>
                        </select>
                    </div>
                    <div>
                        <label>Hair Style:</label>
                        <select id="hairStyle">
                            <option value="parted">Parted</option>
                            <option value="ponytail">Ponytail</option>
                            <option value="messy">Messy</option>
                            <option value="long">Long</option>
                            <option value="short">Short</option>
                        </select>
                    </div>
                    <div>
                        <label>Clothing:</label>
                        <select id="clothing">
                            <option value="longsleeve">Long Sleeve</option>
                            <option value="shortsleeve">Short Sleeve</option>
                            <option value="formal">Formal</option>
                            <option value="casual">Casual</option>
                        </select>
                    </div>
                    <div>
                        <label>Skin Tone:</label>
                        <select id="skinTone">
                            <option value="fair">Fair</option>
                            <option value="medium">Medium</option>
                            <option value="dark">Dark</option>
                        </select>
                    </div>
                    <button onclick="randomizeSprite()">Randomize</button>
                    <button onclick="generateSprite()">Generate</button>
                </div>
                
                <div class="sprite-preview">
                    <h3>Preview</h3>
                    <div class="sprite-canvas" id="spriteCanvas">
                        <!-- Sprite preview will be rendered here -->
                    </div>
                    <div>
                        <button onclick="exportSprite()">Export PNG</button>
                        <button onclick="saveProfile()">Save Profile</button>
                    </div>
                </div>
                
                <div class="sprite-controls">
                    <h3>Layer Management</h3>
                    <div id="spriteLayers">
                        <div class="sprite-layer">
                            <span>Body</span>
                            <div class="layer-controls">
                                <button onclick="toggleLayer('body')">üëÅÔ∏è</button>
                                <button onclick="editLayer('body')">‚úèÔ∏è</button>
                            </div>
                        </div>
                        <div class="sprite-layer">
                            <span>Hair</span>
                            <div class="layer-controls">
                                <button onclick="toggleLayer('hair')">üëÅÔ∏è</button>
                                <button onclick="editLayer('hair')">‚úèÔ∏è</button>
                            </div>
                        </div>
                        <div class="sprite-layer">
                            <span>Clothing</span>
                            <div class="layer-controls">
                                <button onclick="toggleLayer('clothing')">üëÅÔ∏è</button>
                                <button onclick="editLayer('clothing')">‚úèÔ∏è</button>
                            </div>
                        </div>
                    </div>
                    <button onclick="addLayer()">Add Layer</button>
                </div>
            </div>
        </div>

        <!-- Board Designer -->
        <div class="section">
            <h2 onclick="toggleSection('boardDesignerContent')">üé® Hypocycloid Board Designer <span id="boardDesignerToggle">‚ñº</span></h2>
            <div id="boardDesignerContent" class="section-content" style="display: none;">
                <div>
                    <h3>Live Preview</h3>
                    <svg id="designerBoard" width="400" height="400" viewBox="-200 -200 400 400" style="background: #1a1a2e; border-radius: 10px;"></svg>
                </div>
                <div>
                    <h3>Ring Parameters</h3>
                    <div id="ringControls" style="display: grid; gap: 15px;">
                        <!-- Ring controls will be inserted here -->
                    </div>
                    <button onclick="resetToDefaults()">Reset to Defaults</button>
                </div>
                <div>
                    <h3>Generated Code</h3>
                    <textarea id="codeOutput" readonly style="width: 100%; height: 300px; background: #2a2a2a; color: #00ff00; font-family: monospace; font-size: 12px; border: 1px solid #555; border-radius: 5px; padding: 10px;"></textarea>
                    <button onclick="copyCode()">Copy Code</button>
                </div>
            </div>
        </div>

        <!-- Card System Testing -->
        <div class="section">
            <h2 onclick="toggleSection('cardSystemContent')">üÉè Card System Testing <span id="cardSystemToggle">‚ñº</span></h2>
            <div id="cardSystemContent" class="section-content" style="display: none;">
                <div>
                    <h3>Card Parser</h3>
                    <button onclick="loadCardData()">Load Card Data</button>
                    <button onclick="shuffleDeck()">Shuffle Deck</button>
                    <div id="deckInfo" style="margin: 10px 0; font-size: 14px;"></div>
                </div>
                <div>
                    <h3>Draw Cards</h3>
                    <button onclick="drawCard('sin')">Draw Sin Card</button>
                    <button onclick="drawCard('virtue')">Draw Virtue Card</button>
                    <button onclick="drawCard('random')">Draw Random</button>
                    <div id="drawnCard" style="margin-top: 15px;"></div>
                </div>
                <div>
                    <h3>Card Effects</h3>
                    <div id="cardEffects" style="background: rgba(0, 0, 0, 0.3); padding: 10px; border-radius: 5px; font-size: 12px; font-family: monospace; min-height: 150px;"></div>
                </div>
            </div>
        </div>

        <!-- Skin System Testing -->
        <div class="section">
            <h2 onclick="toggleSection('skinSystemContent')">üé≠ Skin System Testing <span id="skinSystemToggle">‚ñº</span></h2>
            <div id="skinSystemContent" class="section-content" style="display: none;">
                <div>
                    <h3>Card Skins</h3>
                    <select id="cardSkinSelect" onchange="previewCardSkin()">
                        <option value="default">Default Skin</option>
                        <option value="minimal">Minimal Skin</option>
                        <option value="retro">Retro Skin</option>
                    </select>
                    <div id="cardSkinPreview" style="margin: 15px 0;"></div>
                </div>
                <div>
                    <h3>Avatar Skins</h3>
                    <select id="avatarSkinSelect" onchange="previewAvatarSkin()">
                        <option value="default">Default Avatar</option>
                        <option value="pixel">Pixel Avatar</option>
                        <option value="abstract">Abstract Avatar</option>
                    </select>
                    <div id="avatarSkinPreview" style="margin: 15px 0;"></div>
                </div>
                <div>
                    <h3>Skin Configuration</h3>
                    <label>Card Theme:</label>
                    <input type="color" id="cardThemeColor" value="#ff6b6b" onchange="updateSkinTheme()">
                    <label>Avatar Style:</label>
                    <input type="range" id="avatarStyleSlider" min="1" max="5" value="3" onchange="updateAvatarStyle()">
                    <div id="skinConfig" style="font-size: 12px; margin-top: 10px;"></div>
                </div>
            </div>
        </div>

        <!-- Game Engine Testing -->
        <div class="section">
            <h2 onclick="toggleSection('gameEngineContent')">‚öôÔ∏è Game Engine Testing <span id="gameEngineToggle">‚ñº</span></h2>
            <div id="gameEngineContent" class="section-content" style="display: none;">
                <div>
                    <h3>State Machine</h3>
                    <div id="currentState" style="font-weight: bold; margin: 10px 0;">State: SETUP</div>
                    <button onclick="advanceState()">Advance State</button>
                    <button onclick="resetGameState()">Reset State</button>
                    <div id="stateHistory" style="background: rgba(0, 0, 0, 0.3); padding: 10px; border-radius: 5px; font-size: 12px; margin-top: 10px; max-height: 100px; overflow-y: auto;"></div>
                </div>
                <div>
                    <h3>Timer System</h3>
                    <div id="timerDisplay" style="font-size: 24px; font-weight: bold; margin: 10px 0;">30:00</div>
                    <button onclick="startTimer()">Start Timer</button>
                    <button onclick="pauseTimer()">Pause Timer</button>
                    <button onclick="resetTimer()">Reset Timer</button>
                    <input type="range" id="timerSpeed" min="0.1" max="5" step="0.1" value="1" onchange="updateTimerSpeed()">
                    <label for="timerSpeed">Speed: <span id="speedDisplay">1x</span></label>
                </div>
                <div>
                    <h3>Event Scheduler</h3>
                    <button onclick="scheduleEvent()">Schedule Random Event</button>
                    <button onclick="triggerGlobalEvent()">Trigger Global Event</button>
                    <div id="eventQueue" style="background: rgba(0, 0, 0, 0.3); padding: 10px; border-radius: 5px; font-size: 12px; margin-top: 10px; max-height: 120px; overflow-y: auto;"></div>
                </div>
            </div>
        </div>

        <!-- Hypocycloid Math Testing -->
        <div class="section">
            <h2 onclick="toggleSection('mathTestingContent')">üìä Hypocycloid Math Testing <span id="mathTestingToggle">‚ñº</span></h2>
            <div id="mathTestingContent" class="section-content" style="display: none;">
                <div>
                    <h3>Coordinate Generation</h3>
                    <label>Test Ring Radius:</label>
                    <input type="number" id="testRadius" value="150" min="50" max="300" onchange="generateTestCoordinates()">
                    <label>Number of Points:</label>
                    <input type="number" id="testPoints" value="10" min="3" max="50" onchange="generateTestCoordinates()">
                    <button onclick="generateTestCoordinates()">Generate</button>
                    <div id="coordinateOutput" style="background: rgba(0, 0, 0, 0.3); padding: 10px; border-radius: 5px; font-size: 12px; margin-top: 10px; max-height: 150px; overflow-y: auto;"></div>
                </div>
                <div>
                    <h3>Performance Testing</h3>
                    <button onclick="benchmarkCalculations()">Benchmark Calculations</button>
                    <button onclick="stressTestBoard()">Stress Test Board</button>
                    <div id="perfResults" style="background: rgba(0, 0, 0, 0.3); padding: 10px; border-radius: 5px; font-size: 12px; margin-top: 10px; max-height: 150px; overflow-y: auto;"></div>
                </div>
                <div>
                    <h3>Validation</h3>
                    <button onclick="validateMath()">Validate Math</button>
                    <button onclick="testEdgeCases()">Test Edge Cases</button>
                    <div id="validationResults" style="background: rgba(0, 0, 0, 0.3); padding: 10px; border-radius: 5px; font-size: 12px; margin-top: 10px; max-height: 150px; overflow-y: auto;"></div>
                </div>
            </div>
        </div>

        <!-- Console Window -->
        <div class="console-window" id="devConsole" style="display: none;">
            <div class="console-header">
                <span>Development Console</span>
                <span class="console-close" onclick="toggleConsole()">√ó</span>
            </div>
            <div class="console-content" id="consoleContent">
                <div class="console-info"><span class="timestamp">[00:00:00]</span> Development console initialized</div>
            </div>
        </div>

        <div style="margin-top: 40px; text-align: center;">
            <button onclick="toggleConsole()">Toggle Dev Console</button>
            <button onclick="clearConsole()">Clear Console</button>
            <button onclick="exportLogs()">Export Logs</button>
        </div>
    </div>

    <script src="board-designer.js"></script>
    <script src="game.js"></script>
    <script>
        // Section toggle functionality
        function toggleSection(sectionId) {
            const content = document.getElementById(sectionId);
            const toggle = document.getElementById(sectionId.replace('Content', 'Toggle'));
            
            if (content.style.display === 'none') {
                content.style.display = 'flex';
                toggle.textContent = '‚ñ≤';
            } else {
                content.style.display = 'none';
                toggle.textContent = '‚ñº';
            }
        }

        // LPC Sprite Builder Functions
        function randomizeSprite() {
            const bodyTypes = ['male', 'female', 'child', 'teen'];
            const hairStyles = ['parted', 'ponytail', 'messy', 'long', 'short'];
            const clothingTypes = ['longsleeve', 'shortsleeve', 'formal', 'casual'];
            const skinTones = ['fair', 'medium', 'dark'];

            document.getElementById('bodyType').value = bodyTypes[Math.floor(Math.random() * bodyTypes.length)];
            document.getElementById('hairStyle').value = hairStyles[Math.floor(Math.random() * hairStyles.length)];
            document.getElementById('clothing').value = clothingTypes[Math.floor(Math.random() * clothingTypes.length)];
            document.getElementById('skinTone').value = skinTones[Math.floor(Math.random() * skinTones.length)];

            generateSprite();
        }

        function generateSprite() {
            const bodyType = document.getElementById('bodyType').value;
            const hairStyle = document.getElementById('hairStyle').value;
            const clothing = document.getElementById('clothing').value;
            const skinTone = document.getElementById('skinTone').value;

            logToConsole(`Generating sprite: ${bodyType}, ${hairStyle}, ${clothing}, ${skinTone}`, 'info');
            
            // TODO: Integrate with LPC generator
            const canvas = document.getElementById('spriteCanvas');
            canvas.innerHTML = `<div style="padding: 80px 0; color: #999;">Generated: ${bodyType} with ${hairStyle} hair</div>`;
        }

        function exportSprite() {
            logToConsole('Exporting sprite as PNG...', 'success');
            // TODO: Implement sprite export
        }

        function saveProfile() {
            const profile = {
                bodyType: document.getElementById('bodyType').value,
                hairStyle: document.getElementById('hairStyle').value,
                clothing: document.getElementById('clothing').value,
                skinTone: document.getElementById('skinTone').value
            };
            localStorage.setItem('spriteProfile', JSON.stringify(profile));
            logToConsole('Sprite profile saved', 'success');
        }

        function toggleLayer(layerName) {
            logToConsole(`Toggled layer: ${layerName}`, 'info');
        }

        function editLayer(layerName) {
            logToConsole(`Editing layer: ${layerName}`, 'info');
        }

        function addLayer() {
            logToConsole('Adding new layer...', 'info');
        }

        // Console Functions
        function toggleConsole() {
            const console = document.getElementById('devConsole');
            console.style.display = console.style.display === 'none' ? 'flex' : 'none';
        }

        function clearConsole() {
            document.getElementById('consoleContent').innerHTML = '';
        }

        function exportLogs() {
            const logs = document.getElementById('consoleContent').innerText;
            const blob = new Blob([logs], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'dev-logs.txt';
            a.click();
        }

        function logToConsole(message, type = 'info') {
            const console = document.getElementById('consoleContent');
            const timestamp = new Date().toLocaleTimeString();
            const logEntry = document.createElement('div');
            logEntry.className = `console-${type}`;
            logEntry.innerHTML = `<span class="timestamp">[${timestamp}]</span> ${message}`;
            console.appendChild(logEntry);
            console.scrollTop = console.scrollHeight;
        }

        // Override console functions for development tracking
        const originalLog = console.log;
        const originalError = console.error;
        const originalWarn = console.warn;

        console.log = function(...args) {
            originalLog.apply(console, args);
            logToConsole(args.join(' '), 'info');
        };

        console.error = function(...args) {
            originalError.apply(console, args);
            logToConsole(args.join(' '), 'error');
        };

        console.warn = function(...args) {
            originalWarn.apply(console, args);
            logToConsole(args.join(' '), 'warning');
        };

        // Initialize development page
        document.addEventListener('DOMContentLoaded', function() {
            logToConsole('Development tools loaded', 'success');
            
            // Load saved sprite profile if exists
            const savedProfile = localStorage.getItem('spriteProfile');
            if (savedProfile) {
                const profile = JSON.parse(savedProfile);
                document.getElementById('bodyType').value = profile.bodyType || 'male';
                document.getElementById('hairStyle').value = profile.hairStyle || 'parted';
                document.getElementById('clothing').value = profile.clothing || 'longsleeve';
                document.getElementById('skinTone').value = profile.skinTone || 'fair';
                logToConsole('Loaded saved sprite profile', 'info');
            }
        });
    </script>
</body>
</html>
