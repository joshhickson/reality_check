<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reality Check - The Game</title>
    <script src="/socket.io/socket.io.js"></script>
    <script type="importmap">
        {
            "imports": {
                "three": "https://cdn.jsdelivr.net/npm/three@0.170.0/build/three.module.js"
            }
        }
    </script>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            min-height: 100vh;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            text-align: center;
        }
        .game-board {
            display: flex;
            gap: 20px;
            margin: 20px 0;
        }
        .board-container {
            flex: 2;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
        }
        .game-controls {
            flex: 1;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
        }
        #board {
            width: 100%;
            height: 600px;
            border-radius: 10px;
            background: #1a1a2e;
        }
        .player-card {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            padding: 15px;
            margin: 10px 0;
        }
        .stats-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin: 10px 0;
        }
        .stat {
            background: rgba(0, 0, 0, 0.3);
            padding: 8px;
            border-radius: 5px;
        }
        button {
            background: #ff6b6b;
            border: none;
            color: white;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            margin: 5px;
            transition: background 0.3s;
        }
        button:hover {
            background: #ff5252;
        }
        button:disabled {
            background: #666;
            cursor: not-allowed;
        }
        .card {
            background: rgba(255, 255, 255, 0.9);
            color: #333;
            border-radius: 10px;
            padding: 15px;
            margin: 10px 0;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        .sin-card {
            border-left: 5px solid #ff6b6b;
        }
        .virtue-card {
            border-left: 5px solid #1dd1a1;
        }
        .ring-legend {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 10px 0;
            flex-wrap: wrap;
        }
        .ring-item {
            display: flex;
            align-items: center;
            gap: 5px;
            background: rgba(255, 255, 255, 0.2);
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 14px;
        }
        .ring-color {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }
        #gameSetup {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 30px;
            margin: 20px 0;
        }
        input {
            padding: 10px;
            border: none;
            border-radius: 5px;
            margin: 5px;
            font-size: 16px;
        }
        .ring-control {
            background: rgba(255, 255, 255, 0.1);
            padding: 10px;
            border-radius: 8px;
            border-left: 4px solid;
        }
        .ring-control label {
            display: block;
            margin: 5px 0;
            font-size: 14px;
        }
        .ring-control input[type="range"] {
            width: 100%;
            margin: 5px 0;
        }
        .ring-control input[type="number"] {
            width: 60px;
            padding: 3px;
            font-size: 12px;
        }

        /* Console Styles */
        .console-window {
            position: fixed;
            top: 20px;
            right: 20px;
            width: 350px;
            height: 400px;
            background: rgba(0, 0, 0, 0.9);
            border: 1px solid #444;
            border-radius: 8px;
            z-index: 1000;
            display: flex;
            flex-direction: column;
        }

        .console-header {
            background: #333;
            padding: 8px 12px;
            border-radius: 8px 8px 0 0;
            font-size: 14px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .console-close {
            cursor: pointer;
            color: #ff6b6b;
            font-weight: bold;
        }

        .console-content {
            flex: 1;
            padding: 8px;
            overflow-y: auto;
            font-family: 'Courier New', monospace;
            font-size: 11px;
            color: #00ff00;
            line-height: 1.4;
        }

        .console-info { color: #00ff00; }
        .console-warning { color: #feca57; }
        .console-error { color: #ff6b6b; }
        .console-success { color: #1dd1a1; }
        .console-card { color: #ff9800; }
        .console-state { color: #9c88ff; }
        .console-timer { color: #48dbfb; }
        .console-event { color: #f0932b; }
        .console-global { color: #eb4d4b; }
        .console-math { color: #6c5ce7; }
        .console-perf { color: #a29bfe; }

        .timestamp {
            color: #666;
            font-size: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <nav style="background: rgba(255, 255, 255, 0.1); border-radius: 10px; padding: 15px; margin-bottom: 20px; display: flex; justify-content: space-between; align-items: center;">
            <div style="font-size: 18px; font-weight: bold;">🎲 Reality Check</div>
            <div>
                <a href="about.html" style="color: white; text-decoration: none; padding: 8px 16px; background: rgba(255, 255, 255, 0.2); border-radius: 5px; transition: background 0.3s;" onmouseover="this.style.background='rgba(255, 255, 255, 0.3)'" onmouseout="this.style.background='rgba(255, 255, 255, 0.2)'">About</a>
		<a href="development.html" style="color: white; text-decoration: none; padding: 8px 16px; background: rgba(255, 255, 255, 0.2); border-radius: 5px; transition: background 0.3s;" onmouseover="this.style.background='rgba(255, 255, 255, 0.3)'" onmouseout="this.style.background='rgba(255, 255, 255, 0.2)'">Development</a>
                <a href="sprite-path-tester.html" style="color: white; text-decoration: none; padding: 8px 16px; background: rgba(255, 255, 255, 0.2); border-radius: 5px; transition: background 0.3s;" onmouseover="this.style.background='rgba(255, 255, 255, 0.3)'" onmouseout="this.style.background='rgba(255, 255, 255, 0.2)'">Sprite Tester</a>
                <a href="lpc-generator/index.html" style="color: white; text-decoration: none; padding: 8px 16px; background: rgba(255, 255, 255, 0.2); border-radius: 5px; transition: background 0.3s;" onmouseover="this.style.background='rgba(255, 255, 255, 0.3)'" onmouseout="this.style.background='rgba(255, 255, 255, 0.2)'">LPC Generator</a>
            </div>
        </nav>

        <h1>🎲 Reality Check: The Game</h1>
        <p>The only board game where your dog might get TikTok famous, your crypto side hustle triggers an IRS raid, and you still have to split rent with your emotionally unavailable ex.</p>

        <div id="gameSetup">
            <h2>Game Setup</h2>
            <div>
                <input type="text" id="usernameInput" placeholder="Enter your username" />
                <input type="text" id="gameNameInput" placeholder="Game name (for creating)" />
            </div>
            <div>
                <button onclick="createGame()">Create New Game</button>
                <button onclick="joinGame()">Join Game</button>
            </div>
            <div id="gamesList"></div>
        </div>

        <div id="gameArea" style="display: none;">
            <div class="game-board">
                <div class="board-container">
                    <h3>The Chaos Circle</h3>
                    <div class="ring-legend">
                        <div class="ring-item">
                            <div class="ring-color" style="background: #ff6b6b;"></div>
                            Career (Red)
                        </div>
                        <div class="ring-item">
                            <div class="ring-color" style="background: #feca57;"></div>
                            Health (Gold)
                        </div>
                        <div class="ring-item">
                            <div class="ring-color" style="background: #48dbfb;"></div>
                            Social (Cyan)
                        </div>
                        <div class="ring-item">
                            <div class="ring-color" style="background: #1dd1a1;"></div>
                            Personal (Green)
                        </div>
                        <div class="ring-item">
                            <div class="ring-color" style="background: #5f27cd;"></div>
                            Babel Events (Purple)
                        </div>
                    </div>
                    <svg id="board" width="600" height="600" viewBox="-300 -300 600 600"></svg>
                </div>

                <div class="game-controls">
                    <h3>Game Status</h3>
                    <div id="gameStatus">Waiting for players...</div>

                    <div id="playerInfo" class="player-card" style="display: none;">
                        <h4>Your Character</h4>
                        <div id="characterInfo"></div>
                        <div class="stats-grid">
                            <div class="stat">💰 Money: <span id="money">5000</span></div>
                            <div class="stat">🧠 Mental: <span id="mental">5</span></div>
                            <div class="stat">☠️ Sin: <span id="sin">0</span></div>
                            <div class="stat">✝️ Virtue: <span id="virtue">0</span></div>
                        </div>
                    </div>

                    <div id="turnControls" style="display: none;">
                        <button id="rollButton" onclick="rollDice()">Roll Dice</button>
                        <div id="rollResult"></div>
                    </div>

                    <div id="cardsArea"></div>

                    <div id="playersArea">
                        <h4>Players</h4>
                        <div id="playersList"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Console Window -->
        <div id="consoleWindow" class="console-window" style="display: none;">
            <div class="console-header">
                <span>🔧 Game Console</span>
                <span class="console-close" onclick="toggleConsole()">✕</span>
            </div>
            <div id="gameConsole" class="console-content">
                <div class="console-info"><span class="timestamp">[00:00:00]</span> Game console initialized</div>
            </div>
        </div>

        <!-- Console Toggle Button -->
        <button onclick="toggleConsole()" style="position: fixed; bottom: 20px; right: 20px; z-index: 999; background: #333; color: white; border: none; padding: 10px 15px; border-radius: 50%; cursor: pointer; font-size: 16px;">
            🔧
        </button>
    </div>

    <script src="game.js"></script>
    <script type="module" src="board-render.js"></script>
    <script>
        // Console window management
        function addToConsole(message, type = 'info') {
            const console = document.getElementById('gameConsole');
            const timestamp = new Date().toLocaleTimeString();
            const messageEl = document.createElement('div');
            messageEl.className = `console-${type}`;
            messageEl.innerHTML = `<span class="timestamp">[${timestamp}]</span> ${message}`;
            console.appendChild(messageEl);
            console.scrollTop = console.scrollHeight;

            // Keep only last 100 messages
            while (console.children.length > 100) {
                console.removeChild(console.firstChild);
            }
        }

        // Card System Testing Functions - NOT USED, REMOVE
        // Skin System Testing Functions - NOT USED, REMOVE
        // Game Engine Testing Functions - NOT USED, REMOVE
        // Math Testing Functions - NOT USED, REMOVE

        // Console window management
        function toggleConsole() {
            const consoleWindow = document.getElementById('consoleWindow');
            if (consoleWindow.style.display === 'none') {
                consoleWindow.style.display = 'flex';
                addToConsole('Console window opened', 'info');
            } else {
                consoleWindow.style.display = 'none';
            }
        }

        // Initialize sections as collapsed except board designer - NOT NEEDED ANYMORE, REMOVE
        document.addEventListener('DOMContentLoaded', function() {
            addToConsole('Reality Check initialized', 'success');
        });
    </script>
</body>
</html>